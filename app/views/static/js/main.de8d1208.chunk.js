(this.webpackJsonpissuelibraryclient=this.webpackJsonpissuelibraryclient||[]).push([[0],{335:function(e,t,r){},336:function(e,t,r){},339:function(e,t,r){},410:function(e,t,r){},416:function(e,t,r){},417:function(e,t,r){},418:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(224),c=r.n(s),i=r(103),l=r(14),u=r(15),o=r(17),d=r(16),p=r(27),j=r(12),h=r(25),b=r(124),m=r(433),f=r(425),O=r(232),x=r(51),v=r(422),w=r(424),g=r(230),I=r(156),S=r(107),k=r(227),y=r.n(k),C=r(60),T=r.n(C),N=r(127),U=-1,R=0,P=1,F=0,D=1,M=2,V=0,A=1,L=2,E=3,q=4,B=[{type:D,name:"\u5211\u4e8b\u62d8\u7559",value:0,steps:[{name:"\u5211\u4e8b\u62d8\u7559",totalTime:"3 D",timeToOrange:"2 D",timeToRed:"3 D"},{name:"\u5ef6\u957f\u7f81\u62bc\u671f\u9650",totalTime:"27 D",timeToOrange:"20 D",timeToRed:"30 D"}]},{type:D,name:"\u53d6\u4fdd\u5019\u5ba1",value:1,steps:[{name:"\u53d6\u4fdd\u5019\u5ba1",totalTime:"12 M",timeToOrange:"9 M",timeToRed:"12 M"}]},{type:D,name:"\u902e\u6355",value:2,steps:[{name:"\u902e\u6355",totalTime:"2 M",timeToOrange:"40 D",timeToRed:"50 D"},{name:"\u7b2c\u4e00\u6b21\u5ef6\u957f\u7f81\u62bc\u671f\u9650",totalTime:"1 M",timeToOrange:"10 D",timeToRed:"20 D"},{name:"\u7b2c\u4e8c\u6b21\u5ef6\u957f\u7f81\u62bc\u671f\u9650",totalTime:"2 M",timeToOrange:"40 D",timeToRed:"50 D"}]},{type:M,name:"\u884c\u653f\u6848\u4ef6\u7acb\u6848",value:3,steps:[{name:"\u884c\u653f\u8c03\u67e5",totalTime:"180 D",timeToOrange:"3 M",timeToRed:"180 D"},{name:"\u6cd5\u5236\u5ba1\u67e5",totalTime:"180 D",timeToOrange:"1 M",timeToRed:"180 D"}]}],H="\u6240\u6709",J=["\u666e\u901a\u7528\u6237","\u7ba1\u7406\u5458"],G="\u672a\u77e5\u9519\u8bef\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\uff01",W="\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01",z="\u65e7\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",K="\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!",Q="\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801\uff01",X="\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01",Y="\u4e24\u6b21\u65b0\u5bc6\u7801\u4e0d\u540c\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01",Z="\u6848\u4ef6\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01",$="\u6848\u4ef6\u5bf9\u8c61\u4e0d\u80fd\u4e3a\u7a7a\uff01",_="\u5df2\u5b8c\u6210",ee="\u6ca1\u6709\u8d85\u65f6\u98ce\u9669",te="\u6a59\u8272\u8d85\u65f6\u98ce\u9669",re="\u7ea2\u8272\u8d85\u65f6\u98ce\u9669",ne="\u5df2\u8d85\u65f6",ae="\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6dfb\u52a0\u6743\u9650\u6765\u67e5\u770b\u9875\u9762\u5185\u5bb9\u3002",se=r(6),ce=N.a.Option,ie=window.location.origin+"/api/";function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];return t&&n.push(Object(se.jsx)(ce,{value:U,children:H},U)),e.forEach((function(e,t){var r=e.name||e;n.push(Object(se.jsx)(ce,{value:e.value||t,children:r},r))})),r&&r.name&&r.value&&n.push(Object(se.jsx)(ce,{value:r.value,children:r.name},r.name)),n}function ue(e){switch(e){case M:return"\u884c\u653f\u6848\u4ef6";case D:return"\u5211\u4e8b\u6848\u4ef6";default:return""}}function oe(e,t){return(e&t)===t}function de(e){var t=[];return oe(e,D)&&t.push(D),oe(e,M)&&t.push(M),t}function pe(e){return B[e.action].type}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=be(e,t);return r&&r.type===P}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach||(e=[]);var t=0;return e.forEach((function(e){return t+=e})),t}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===t}))}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===e.trim().length}function fe(){return(new Date).setHours(0,0,0,0)}function Oe(e,t){var r=t.split(" "),n=new Date(e),a=n.getDate(),s=parseInt(r[0],10);return"D"===r[1]?n.setDate(a+s):(n.setMonth(n.getMonth()+s),n.getDate()!==a&&n.setDate(0)),n.setDate(n.getDate()-1),n.getTime()}function xe(e,t){return Oe(e,t)<=fe()}function ve(e){if(-1===e.status)return V;var t=B[e.action].steps[e.status],r=t.totalTime,n=t.timeToOrange,a=t.timeToRed,s=e.startTimeArr[e.status];return xe(s,r)?q:xe(s,a)?E:xe(s,n)?L:A}function we(e){if(-1===e.status)return e.completeTime;var t=B[e.action].steps[e.status].totalTime;return Oe(e.startTimeArr[e.status],t)}function ge(e,t){if(e&&e.response){if(401===e.response.status)return void(window.location.href="/login");if((e.response.data||{}).message)throw e.response.data.message}throw t}var Ie=ie+"auth/";function Se(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(h.a)(Object(j.a)().mark((function e(t,r){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.post(Ie+"login",{name:t,pwd:r});case 3:if(!((n=e.sent)&&n.data&&n.data.accessToken)){e.next=7;break}return localStorage.setItem("user",JSON.stringify(n.data)),e.abrupt("return",n&&n.data);case 7:throw Object.assign(new Error(""),{code:-1,msg:"\u672a\u77e5\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u91cd\u542f\u670d\u52a1\u5668\uff01"});case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ye(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(h.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("user"),e.prev=1,e.next=4,T.a.post(Ie+"logout");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),ge(e.t0,"\u6210\u529f\u767b\u51fa\uff01");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Te(){return JSON.parse(localStorage.getItem("user"))||{}}function Ne(){var e=Te();return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var Ue=ie+"user";function Re(){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(h.a)(Object(j.a)().mark((function e(){var t,r,n,a,s=arguments;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:R,a=s.length>3&&void 0!==s[3]?s[3]:F,e.prev=4,!me(t)){e.next=7;break}return e.abrupt("return",Promise.reject(W));case 7:if(!me(r)){e.next=9;break}return e.abrupt("return",Promise.reject(X));case 9:return e.next=11,T.a.post(Ue,{name:t,pwd:r,type:n,privilege:a},{headers:Ne()});case 11:return e.abrupt("return","\u521b\u5efa\u7528\u6237\u6210\u529f\uff01");case 14:e.prev=14,e.t0=e.catch(4),ge(e.t0,"\u521b\u5efa\u7528\u6237\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01");case 17:case"end":return e.stop()}}),e,null,[[4,14]])}))),Pe.apply(this,arguments)}function Fe(){return De.apply(this,arguments)}function De(){return De=Object(h.a)(Object(j.a)().mark((function e(){var t,r,n,a,s,c,i=arguments;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:-1,r=i.length>1&&void 0!==i[1]?i[1]:"",n=i.length>2&&void 0!==i[2]?i[2]:"",a=i.length>3&&void 0!==i[3]?i[3]:R,s=i.length>4&&void 0!==i[4]?i[4]:F,e.prev=5,-1!==t){e.next=8;break}return e.abrupt("return",Promise.reject(G));case 8:if(!me(r)){e.next=10;break}return e.abrupt("return",Promise.reject(W));case 10:return c={name:r,type:a,privilege:s},""!==n&&(c.pwd=n),e.next=14,T.a.put(Ue+"/"+t,c,{headers:Ne()});case 14:return e.abrupt("return","\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u6210\u529f\uff01");case 17:e.prev=17,e.t0=e.catch(5),ge(e.t0,"\u66f4\u65b0\u7528\u6237\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01");case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),De.apply(this,arguments)}function Me(){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(h.a)(Object(j.a)().mark((function e(){var t,r,n,a=arguments;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:-1,r=a.length>1&&void 0!==a[1]?a[1]:"",n=a.length>2&&void 0!==a[2]?a[2]:"",e.prev=3,-1!==t){e.next=6;break}return e.abrupt("return",Promise.reject(G));case 6:if(!me(r)){e.next=8;break}return e.abrupt("return",Promise.reject(z));case 8:if(!me(n)){e.next=10;break}return e.abrupt("return",Promise.reject(K));case 10:return e.next=12,T.a.put(Ue+"/updatePwd/"+t,{oldPwd:r,newPwd:n},{headers:Ne()});case 12:return e.abrupt("return","\u66f4\u6539\u5bc6\u7801\u6210\u529f!");case 15:e.prev=15,e.t0=e.catch(3),ge(e.t0,"\u66f4\u6539\u5bc6\u7801\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01");case 18:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ve.apply(this,arguments)}function Ae(){return Le.apply(this,arguments)}function Le(){return(Le=Object(h.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(Ue,{headers:Ne()});case 3:return t=e.sent,e.abrupt("return",t&&t.data&&t.data.users||[]);case 7:e.prev=7,e.t0=e.catch(0),ge(e.t0,"\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u65b0\u5c1d\u8bd5\u6216\u8054\u7cfb\u7ba1\u7406\u5458\u91cd\u542f\u670d\u52a1\u5668\uff01");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ee(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(h.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.delete(Ue+"/"+t,{headers:Ne()});case 3:return e.sent,e.abrupt("return","\u5220\u9664\u7528\u6237\u6210\u529f");case 7:e.prev=7,e.t0=e.catch(0),ge(e.t0,"\u5220\u9664\u7528\u6237\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Be=r(48),He=r.n(Be);function Je(e){return e||(e={}),{username:e.name||"",password:"",type:e.type||R,privilege:de(e.privilege)}}var Ge=r(429),We=r(430),ze=r(236),Ke=r(431),Qe=r(101),Xe=r(235),Ye=r(428);function Ze(e,t,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return[{title:"\u6848\u4ef6\u540d\u79f0",dataIndex:"issueName",key:"issueName"},{title:"\u8d1f\u8d23\u4eba",width:120,dataIndex:"ownerId",key:"ownerId",render:function(t,r){return Object(se.jsx)("span",{children:e(r.ownerId)})}},{title:"\u91c7\u53d6\u63aa\u65bd",width:120,dataIndex:"action",key:"action",render:function(e,t){return Object(se.jsx)("span",{children:B[t.action].name})}},{title:"\u72b6\u6001",width:180,dataIndex:"issueStatus",key:"issueStatus",render:function(e,t){return Object(se.jsx)("span",{children:-1===t.status?"\u5df2\u5b8c\u6210":B[t.action].steps[t.status].name})}},{title:"\u622a\u6b62\u65e5\u671f",width:120,dataIndex:"endTime",key:"endTime",sorter:function(e,t){return e.endTime-t.endTime},render:function(e,t){return Object(se.jsx)("span",{children:-1===t.status?"":new Date(t.endTime).toLocaleDateString()})}},{title:"\u64cd\u4f5c",width:200,key:"action",render:function(e,c){return(s||c.ownerId===a)&&Object(se.jsxs)(Ye.b,{children:[-1!==c.status&&Object(se.jsx)(Qe.a,{title:"\u6807\u8bb0\u5b8c\u6210",children:Object(se.jsx)(x.a,{icon:Object(se.jsx)(ze.a,{style:{color:"green"}}),shape:"circle",type:"text",onClick:function(e){return t(c.id)}})}),-1!==c.status&&c.status<B[c.action].steps.length-1&&Object(se.jsx)(Qe.a,{title:"\u8f6c\u5230 "+B[c.action].steps[c.status+1].name,children:Object(se.jsx)(x.a,{icon:Object(se.jsx)(Ke.a,{}),shape:"circle",type:"text",onClick:function(e){return r(c.id)}})}),Object(se.jsx)(Qe.a,{title:"\u5220\u9664",children:Object(se.jsx)(x.a,{danger:!0,icon:Object(se.jsx)(We.a,{}),shape:"circle",type:"text",onClick:function(e){return n(c.id)}})})]})}}]}var $e=r(432),_e=(r(335),function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.visible?"showCurtain":"hideCurtain";return Object(se.jsx)("div",{className:e,children:Object(se.jsx)($e.a,{spin:!0})})}}]),r}(n.PureComponent)),et=_e,tt=r(100),rt=r(426),nt=r(153),at=r(126),st=r.n(at),ct=(r(336),function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).openPwdEditor=function(){n.setState({modalVisible:!0}),n.pwdFormRef.current&&n.pwdFormRef.current.setFieldsValue({oldPwd:"",newPwd:"",confirm:""})},n.handleUpdatePwd=Object(h.a)(Object(j.a)().mark((function e(){var t,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.pwdFormRef.current.getFieldsValue()).newPwd===t.confirm){e.next=4;break}return O.b.error(Y),e.abrupt("return");case 4:return e.prev=4,e.next=7,Me(n.props.currentUserId,t.oldPwd,t.newPwd);case 7:r=e.sent,O.b.success(r),n.setState({modalVisible:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),O.b.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])}))),n.handleCancelPwd=function(){n.setState({modalVisible:!1})},n.renderPwdModal=function(){var e=n.state.modalVisible;return Object(se.jsx)(f.a,{closable:!1,className:"pwdModal",title:"\u66f4\u6539\u5bc6\u7801",visible:e,footer:null,children:Object(se.jsxs)(w.a,{ref:n.pwdFormRef,labelCol:{span:6},wrapperCol:{span:14},initialValues:{oldPwd:"",newPwd:"",confirm:""},children:[Object(se.jsx)(w.a.Item,{label:"\u65e7\u5bc6\u7801\uff1a",name:"oldPwd",rules:[{required:!0,message:z}],children:Object(se.jsx)(g.a.Password,{})}),Object(se.jsx)(w.a.Item,{label:"\u65b0\u5bc6\u7801\uff1a",name:"newPwd",rules:[{required:!0,message:K}],children:Object(se.jsx)(g.a.Password,{})}),Object(se.jsx)(w.a.Item,{label:"\u518d\u6b21\u8f93\u5165\u5bc6\u7801\uff1a",name:"confirm",rules:[{required:!0,message:Q}],children:Object(se.jsx)(g.a.Password,{})}),Object(se.jsxs)(w.a.Item,{className:"buttons",wrapperCol:{offset:5,span:15},children:[Object(se.jsx)(x.a,{type:"primary",htmlType:"submit",onClick:n.handleUpdatePwd,children:"\u66f4\u65b0"}),Object(se.jsx)(x.a,{htmlType:"button",onClick:n.handleCancelPwd,children:"\u53d6\u6d88"})]})]})})},n.pwdFormRef=a.a.createRef(),n.state={modalVisible:!1},n}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.showUserManagement,r=e.isHome,n=be(e.userList,e.currentUserId)||{},a=[{label:Object(se.jsx)("span",{onClick:this.openPwdEditor,children:"\u66f4\u6539\u5bc6\u7801"}),key:"0"}];t&&n.type===P&&a.push({label:Object(se.jsx)(i.b,{to:"/admin",children:"\u7ba1\u7406\u7528\u6237"}),key:"1"}),a.push({label:Object(se.jsx)("span",{onClick:ye,children:"\u9000\u51fa\u767b\u5f55"}),key:"2"});var s=Object(se.jsx)(tt.a,{style:{minWidth:80},items:a});return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("div",{className:"titlebar",children:Object(se.jsx)("div",{className:"title",children:"\u91d1\u534e\u6d77\u5173\u6848\u4ef6\u7ba1\u7406\u7cfb\u7edf"})}),Object(se.jsxs)("div",{className:"pathbar",children:[Object(se.jsx)("div",{children:Object(se.jsxs)(rt.a,{className:"path",separator:">",children:[Object(se.jsx)(rt.a.Item,{children:Object(se.jsx)(i.b,{to:"/home",children:"\u4e3b\u9875"})}),!r&&Object(se.jsx)(rt.a.Item,{children:"\u7528\u6237\u7ba1\u7406"})]})}),Object(se.jsxs)("div",{className:"right",children:[Object(se.jsx)("span",{children:"\u6b22\u8fce\u4f60\uff0c"}),Object(se.jsx)(nt.a,{placement:"bottomRight",overlay:s,trigger:["hover"],children:Object(se.jsx)(Ye.b,{children:n.name})})]})]}),this.renderPwdModal()]})}}]),r}(n.PureComponent));ct.protTypes={showUserManagement:st.a.bool,isHome:st.a.bool,userList:st.a.object,currentUserId:st.a.number};var it=ct,lt=(r(339),f.a.confirm),ut=function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).getAllUserList=Object(h.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({showCurtain:!0}),e.next=4,Ae();case 4:t=e.sent,n.setState({users:t}),n.filterUsers(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O.b.error(e.t0);case 12:return e.prev=12,n.setState({showCurtain:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),n.filterUsers=function(e){var t=(e||n.state.users).filter((function(e){return e.name.includes(n.searchText)}));n.setState({currentUsers:t})},n.onSearch=function(e){n.searchText=e.target?e.target.value:e,n.filterUsers()},n.openUserEditor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(n.currentSelectedUserId=e,n.setState({modalVisible:!0}),n.formRef.current){var t=n.state.users.find((function(t){return t.id===e}));n.formRef.current.setFieldsValue(Je(t))}},n.handleDeleteUser=function(e){var t=be(n.state.users,e);t?lt({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664\u7528\u6237 "+t.name,icon:Object(se.jsx)(b.a,{}),onOk:function(){var t=Object(h.a)(Object(j.a)().mark((function t(){var r;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.setState({showCurtain:!0}),t.next=4,Ee(e);case 4:return r=t.sent,O.b.success(r),t.next=8,n.getAllUserList();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),O.b.error(t.t0);case 13:return t.prev=13,n.setState({showCurtain:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})));return function(){return t.apply(this,arguments)}}(),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"}):O.b.error(G)},n.handleCreate=Object(h.a)(Object(j.a)().mark((function e(){var t,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.formRef.current.getFieldsValue(),e.prev=1,n.setState({showCurtain:!0}),e.next=5,Re(t.username,t.password,t.type,he(t.privilege));case 5:return r=e.sent,O.b.success(r),n.setState({modalVisible:!1}),n.currentSelectedUserId=-1,e.next=11,n.getAllUserList();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),O.b.error(e.t0);case 16:return e.prev=16,n.setState({showCurtain:!1}),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))),n.handleUpdate=Object(h.a)(Object(j.a)().mark((function e(){var t,r,a,s,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=be(n.state.users,n.currentSelectedUserId),!(n.currentSelectedUserId<0)&&t){e.next=4;break}return O.b.error("\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\uff01"),e.abrupt("return");case 4:return r=n.formRef.current.getFieldsValue(),e.prev=5,n.setState({showCurtain:!0}),e.next=9,Fe(t.id,r.username,r.password,r.type,he(r.privilege));case 9:return a=e.sent,O.b.success(a),n.setState({modalVisible:!1}),n.resetStatus(),e.next=15,Ae();case 15:s=e.sent,c=s.filter((function(e){return e.name.includes(n.searchText)})),n.setState({users:s,currentUsers:c}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),O.b.error(e.t0);case 23:return e.prev=23,n.setState({showCurtain:!1}),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[5,20,23,26]])}))),n.handleCancel=function(){n.setState({modalVisible:!1})},n.resetStatus=function(){n.currentSelectedUserId=-1},n.renderContent=function(){var e,t,r,a=n.state,s=a.currentUsers,c=a.users;return Object(se.jsxs)("div",{className:"main",children:[Object(se.jsxs)("div",{className:"header",children:[Object(se.jsx)("div",{children:"\u7528\u6237\u5217\u8868"}),Object(se.jsx)(x.a,{type:"primary",shape:"round",icon:Object(se.jsx)(m.a,{}),onClick:function(e){return n.openUserEditor()},children:"\u6dfb\u52a0\u65b0\u7528\u6237"})]}),Object(se.jsxs)("div",{className:"searchbar",children:[Object(se.jsx)(y.a,{placeholder:"\u641c\u7d22\u7528\u6237\u540d",allowClear:!0,onChange:n.onSearch,onSearch:n.onSearch}),Object(se.jsxs)("span",{children:["\u5f53\u524d\u5171\u6709 ",c.length," \u540d\u7528\u6237"]})]}),Object(se.jsx)(v.a,{columns:(e=n.openUserEditor,t=n.handleDeleteUser,r=n.currentUserId,[{title:"\u7528\u6237\u540d",dataIndex:"name",key:"name",ellipsis:!0,render:function(e){return Object(se.jsx)(Qe.a,{title:e,children:e})}},{title:"\u7528\u6237\u7c7b\u578b",dataIndex:"type",key:"type",width:150,render:function(e){return J[e]}},{title:"\u7528\u6237\u6743\u9650",dataIndex:"privilege",key:"privilege",width:200,render:function(e,t){return Object(se.jsxs)(se.Fragment,{children:[oe(t.privilege,D)&&Object(se.jsx)(Xe.a,{color:"red",children:ue(D)}),oe(t.privilege,M)&&Object(se.jsx)(Xe.a,{color:"blue",children:ue(M)})]})}},{title:"\u64cd\u4f5c",key:"action",width:150,render:function(n,a){return Object(se.jsxs)(Ye.b,{children:[Object(se.jsx)(x.a,{icon:Object(se.jsx)(Ge.a,{}),shape:"cicle",type:"text",onClick:function(t){return e(a.id)}}),a.id!==r&&Object(se.jsx)(x.a,{danger:!0,icon:Object(se.jsx)(We.a,{}),shape:"circle",type:"text",onClick:function(e){return t(a.id)}})]})}}]),dataSource:s})]})},n.rendeUserModal=function(e){var t=n.state.modalVisible,r=-1===n.currentSelectedUserId;return Object(se.jsx)(f.a,{closable:!1,className:"createModal",title:r?"\u6dfb\u52a0\u65b0\u7528\u6237":"\u66f4\u6539\u7528\u6237\u4fe1\u606f",visible:t,footer:null,children:Object(se.jsxs)(w.a,{ref:n.formRef,labelCol:{span:7},wrapperCol:{span:15},initialValues:{username:r?"":e.name,password:"",type:r?R:e.type,privilege:de(e.privilege)},children:[Object(se.jsx)(w.a.Item,{label:"\u7528\u6237\u540d: ",name:"username",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01"}],children:Object(se.jsx)(g.a,{})}),Object(se.jsx)(w.a.Item,{label:"\u5bc6\u7801: ",name:"password",rules:r?[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"}]:[],tooltip:r?null:"\u5982\u679c\u4e0d\u6253\u7b97\u66f4\u6539\u5bc6\u7801\uff0c\u6b64\u5904\u7559\u7a7a\u5373\u53ef\u3002",children:Object(se.jsx)(g.a.Password,{})}),Object(se.jsx)(w.a.Item,{label:"\u7528\u6237\u7c7b\u522b: ",name:"type",children:Object(se.jsxs)(I.a.Group,{children:[Object(se.jsx)(I.a,{value:R,children:J[R]}),Object(se.jsx)(I.a,{value:P,children:J[P]})]})}),Object(se.jsx)(w.a.Item,{label:"\u53ef\u67e5\u770b\u7684\u6848\u4ef6: ",name:"privilege",children:Object(se.jsxs)(S.a.Group,{children:[Object(se.jsx)(S.a,{value:D,children:ue(D)}),Object(se.jsx)(S.a,{value:M,children:ue(M)})]})}),Object(se.jsxs)(w.a.Item,{className:"buttons",wrapperCol:{offset:5,span:15},children:[Object(se.jsx)(x.a,{type:"primary",htmlType:"submit",onClick:r?n.handleCreate:n.handleUpdate,children:r?"\u521b\u5efa":"\u66f4\u65b0"}),Object(se.jsx)(x.a,{htmlType:"button",onClick:n.handleCancel,children:"\u53d6\u6d88"})]})]})})},n.formRef=a.a.createRef(),n.state={showEditor:!1,showCurtain:!1,users:[],currentUsers:[]},n.currentUserId=Te().id,n.currentSelectedUserId=-1,n.searchText="",n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllUserList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.showCurtain,r=e.users;if(0===r.length)return null;var n=be(r,this.currentUserId)||{},a=be(r,this.currentSelectedUserId)||{};return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(it,{isHome:!1,showUserManagement:!1,currentUserId:this.currentUserId,userList:r}),n.type!==P?Object(se.jsx)("div",{className:"noPrivilege",children:ae}):Object(se.jsxs)(se.Fragment,{children:[this.renderContent(),this.rendeUserModal(a)]}),Object(se.jsx)(et,{visible:t})]})}}]),r}(n.PureComponent),ot=ut,dt=r(423),pt=r(420),jt=r(421),ht=r(427),bt=r(229),mt=r.n(bt),ft=(r(410),ie+"issue");function Ot(e,t,r,n,a,s,c){return xt.apply(this,arguments)}function xt(){return(xt=Object(h.a)(Object(j.a)().mark((function e(t,r,n,a,s,c,i){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!me(t)){e.next=3;break}return e.abrupt("return",Promise.reject(Z));case 3:if(!me(n)){e.next=5;break}return e.abrupt("return",Promise.reject($));case 5:return e.next=7,T.a.post(ft,{issueName:t,action:r,targetName:n,ownerId:a,status:s,startTimeArr:[c],endTime:null,details:i},{headers:Ne()});case 7:return e.abrupt("return","\u6dfb\u52a0\u6848\u4ef6\u6210\u529f\uff01");case 10:e.prev=10,e.t0=e.catch(0),ge(e.t0,"\u6dfb\u52a0\u6848\u4ef6\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5\uff01");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function vt(){return wt.apply(this,arguments)}function wt(){return wt=Object(h.a)(Object(j.a)().mark((function e(){var t,r,n,a,s,c,i,l,u,o=arguments;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:-1,r=o.length>1?o[1]:void 0,n=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,s=o.length>4?o[4]:void 0,c=o.length>5?o[5]:void 0,i=o.length>6?o[6]:void 0,l=o.length>7?o[7]:void 0,u=o.length>8?o[8]:void 0,e.prev=9,-1!==t){e.next=12;break}return e.abrupt("return",Promise.reject(G));case 12:if(!me(r)){e.next=14;break}return e.abrupt("return",Promise.reject(Z));case 14:if(!me(a)){e.next=16;break}return e.abrupt("return",Promise.reject($));case 16:return e.next=18,T.a.put(ft+"/"+t,{issueName:r,action:n,targetName:a,ownerId:s,status:c,startTimeArr:i,completeTime:l,details:u},{headers:Ne()});case 18:return e.abrupt("return","\u66f4\u65b0\u6848\u4ef6\u6210\u529f\uff01");case 21:e.prev=21,e.t0=e.catch(9),ge(e.t0,"\u66f4\u65b0\u6848\u4ef6\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5\uff01");case 24:case"end":return e.stop()}}),e,null,[[9,21]])}))),wt.apply(this,arguments)}function gt(){return It.apply(this,arguments)}function It(){return(It=Object(h.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(ft,{headers:Ne()});case 3:return t=e.sent,e.abrupt("return",t&&t.data&&t.data.issues||[]);case 7:e.prev=7,e.t0=e.catch(0),ge(e.t0,"\u83b7\u53d6\u6848\u4ef6\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u65b0\u5c1d\u8bd5\u6216\u8054\u7cfb\u7ba1\u7406\u5458\u91cd\u542f\u670d\u52a1\u5668\uff01");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function St(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(h.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.delete(ft+"/"+t,{headers:Ne()});case 3:return e.abrupt("return","\u5220\u9664\u6848\u4ef6\u6210\u529f\uff01");case 6:e.prev=6,e.t0=e.catch(0),ge(e.t0,"\u5220\u9664\u6848\u4ef6\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u65b0\u5c1d\u8bd5!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var yt=N.a.Option,Ct=g.a.Search,Tt=f.a.confirm,Nt=dt.a.RangePicker,Ut=function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).resetCounts=function(){n.ownStatus={timeout:0,redRisk:0,orangeRisk:0,unComplete:0,complete:0,all:0},n.allStatus={timeout:0,redRisk:0,orangeRisk:0,unComplete:0,complete:0,all:0}},n.getAllIssueList=Object(h.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({showCurtain:!0}),e.next=4,gt();case 4:t=e.sent,n.resetCounts(),t.forEach((function(e){e.key=e.id,e.type=pe(e),e.startTime=parseInt(e.startTimeArr[0],10),-1===e.status&&(e.completeTime=parseInt(e.completeTime,10)),e.endTime=we(e);var t=e.ownerId===n.currentUserId,r=ve(e);e.completeStatus=r,r===V?(n.allStatus.complete++,t&&n.ownStatus.complete++):(n.allStatus.unComplete++,t&&n.ownStatus.unComplete++,r===q?(n.allStatus.timeout++,t&&n.ownStatus.timeout++):r===E?(n.allStatus.redRisk++,t&&n.ownStatus.redRisk++):r===L&&(n.allStatus.orangeRisk++,t&&n.ownStatus.orangeRisk++))})),n.setState({issueList:t}),n.ownStatus.all=n.ownStatus.complete+n.ownStatus.unComplete,n.allStatus.all=n.allStatus.complete+n.allStatus.unComplete,n.filterIssues(t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O.b.error(e.t0);case 16:return e.prev=16,n.setState({showCurtain:!1}),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])}))),n.filterIssues=function(e){var t=e||n.state.issueList,r=n.filterStatus,a=r.issueName,s=r.issueType,c=r.action,i=r.completeStatus,l=r.ownerId,u=r.targetName,o=r.startTime,d=r.endTime,p=t.filter((function(e){return!(!me(a)&&e.issueName.indexOf(a)<0)&&((-1===s||e.type===s)&&((-1===c||e.action===c)&&((-1===i||e.completeStatus===i)&&((-1===l||e.ownerId===l)&&(!(!me(u)&&e.targetName.indexOf(u)<0)&&((null===o||2===o.length&&!He()(e.startTime).isBefore(o[0])&&!He()(e.startTime).isAfter(o[1]))&&(null===d||2===d.length&&!He()(e.endTime).isBefore(d[0])&&!He()(e.endTime).isAfter(d[1]))))))))}));n.setState({currentIssues:p})},n.getUserNameById=function(e){return(n.state.users.find((function(t){return t.id===e}))||{}).name||""},n.openIssueEditor=function(){var e;n.setState({issueModalVisible:!0}),n.issueFormRef.current&&n.issueFormRef.current.setFieldsValue((e||(e={}),{issueName:e.issueName||"",targetName:e.targetName||"",issueAction:e.action||0,status:e.status||0,startTime:He()(e.startTimeArr&&e.startTimeArr[0])||He()(),details:e.details||""}))},n.onSearchIssueName=function(e){n.filterStatus.issueName=e.target?e.target.value:e,n.filterIssues()},n.onIssueTypeChange=function(e){n.filterStatus.issueType=e,n.filterIssues()},n.onActionFilterChange=function(e){n.filterStatus.action=e,n.filterIssues()},n.onIssueStatusChange=function(e){n.filterStatus.completeStatus=e,n.filterIssues()},n.onOwnerChange=function(e){n.filterStatus.ownerId=e,n.filterIssues()},n.onSearchTargetName=function(e){n.filterStatus.targetName=e.target?e.target.value:e,n.filterIssues()},n.onStartTimeFilterChange=function(e){n.filterStatus.startTime=e,n.filterIssues()},n.onEndTimeFilterChange=function(e){n.filterStatus.endTime=e,n.filterIssues()},n.getAllUsersList=function(){var e=[Object(se.jsx)(yt,{value:U,children:H},U)];return n.state.users.forEach((function(t){e.push(Object(se.jsx)(yt,{value:t.id,children:t.name},t.id))})),e},n.handleCreateIssue=Object(h.a)(Object(j.a)().mark((function e(){var t,r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.issueFormRef.current.getFieldsValue(),e.prev=1,n.setState({showCurtain:!0}),e.next=5,Ot(t.issueName,t.action,t.targetName,n.currentUserId,0,t.startTime.valueOf(),t.details);case 5:return r=e.sent,O.b.success(r),n.setState({issueModalVisible:!1}),e.next=10,n.getAllIssueList();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),O.b.error(e.t0);case 15:return e.prev=15,n.setState({showCurtain:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))),n.handleCancelIssue=function(){n.setState({issueModalVisible:!1})},n.handleMoveToNextStep=function(e){var t=be(n.state.issueList,e);t?Tt({title:"\u662f\u5426\u786e\u8ba4\u5c06\u8be5\u6848\u4ef6\u79fb\u81f3\u4e0b\u4e00\u9636\u6bb5",icon:Object(se.jsx)(b.a,{}),onOk:function(){var r=Object(h.a)(Object(j.a)().mark((function r(){var a,s,c;return Object(j.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.setState({showCurtain:!0}),(a=t.status+1)>=B[t.action].steps.length&&(a=-1),(s=t.startTimeArr).push(fe()),r.next=8,vt(e,t.issueName,t.action,t.targetName,t.ownerId,a,s,t.details);case 8:return c=r.sent,O.b.success(c),r.next=12,n.getAllIssueList();case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),O.b.error(r.t0);case 17:return r.prev=17,n.setState({showCurtain:!1}),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[0,14,17,20]])})));return function(){return r.apply(this,arguments)}}(),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"}):O.b.error(G)},n.handleMarkComplete=function(e){var t=be(n.state.issueList,e);t?Tt({title:"\u662f\u5426\u786e\u5b9a\u5c06\u8be5\u6848\u4ef6\u6807\u8bb0\u5b8c\u6210",icon:Object(se.jsx)(b.a,{}),onOk:function(){var r=Object(h.a)(Object(j.a)().mark((function r(){var a;return Object(j.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.setState({showCurtain:!0}),r.next=4,vt(e,t.issueName,t.action,t.targetName,t.ownerId,-1,t.startTimeArr,t.details);case 4:return a=r.sent,O.b.success(a),r.next=8,n.getAllIssueList();case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),O.b.error(r.t0);case 13:return r.prev=13,n.setState({showCurtain:!1}),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[0,10,13,16]])})));return function(){return r.apply(this,arguments)}}(),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"}):O.b.error(G)},n.handleDeleteIssue=function(e){Tt({title:"\u662f\u5426\u786e\u5b9a\u5220\u9664\u8be5\u6848\u4ef6",icon:Object(se.jsx)(b.a,{}),onOk:function(){var t=Object(h.a)(Object(j.a)().mark((function t(){var r;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.setState({showCurtain:!0}),t.next=4,St(e);case 4:return r=t.sent,O.b.success(r),t.next=8,n.getAllIssueList();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),O.b.error(t.t0);case 13:return t.prev=13,n.setState({showCurtain:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})));return function(){return t.apply(this,arguments)}}(),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})},n.renderSummary=function(){return Object(se.jsxs)("div",{className:"summary",children:[Object(se.jsxs)(pt.a,{children:[Object(se.jsx)(jt.a,{className:"title",span:6}),Object(se.jsx)(jt.a,{className:"timeout",span:3,children:"\u8d85\u65f6\u672a\u5b8c\u6210"}),Object(se.jsx)(jt.a,{className:"redRisk",span:3,children:"\u7ea2\u8272\u8b66\u544a"}),Object(se.jsx)(jt.a,{className:"orangeRisk",span:3,children:"\u6a59\u8272\u8b66\u544a"}),Object(se.jsx)(jt.a,{className:"uncomplete",span:3,children:"\u6240\u6709\u672a\u5b8c\u6210"}),Object(se.jsx)(jt.a,{className:"complete",span:3,children:"\u5df2\u5b8c\u6210"}),Object(se.jsx)(jt.a,{className:"all",span:3,children:"\u603b\u6570"})]}),Object(se.jsxs)(pt.a,{children:[Object(se.jsx)(jt.a,{className:"name",span:6,children:"\u4f60\u540d\u4e0b\u7684\u6848\u4ef6"}),Object(se.jsx)(jt.a,{className:"timeout",span:3,children:n.ownStatus.timeout}),Object(se.jsx)(jt.a,{className:"redRisk",span:3,children:n.ownStatus.redRisk}),Object(se.jsx)(jt.a,{className:"orangeRisk",span:3,children:n.ownStatus.orangeRisk}),Object(se.jsx)(jt.a,{className:"uncomplete",span:3,children:n.ownStatus.unComplete}),Object(se.jsx)(jt.a,{className:"complete",span:3,children:n.ownStatus.complete}),Object(se.jsx)(jt.a,{className:"all",span:3,children:n.ownStatus.all})]}),Object(se.jsxs)(pt.a,{children:[Object(se.jsx)(jt.a,{className:"name",span:6,children:"\u6240\u6709\u6848\u4ef6"}),Object(se.jsx)(jt.a,{className:"timeout",span:3,children:n.allStatus.timeout}),Object(se.jsx)(jt.a,{className:"redRisk",span:3,children:n.allStatus.redRisk}),Object(se.jsx)(jt.a,{className:"orangeRisk",span:3,children:n.allStatus.orangeRisk}),Object(se.jsx)(jt.a,{className:"uncomplete",span:3,children:n.allStatus.unComplete}),Object(se.jsx)(jt.a,{className:"complete",span:3,children:n.allStatus.complete}),Object(se.jsx)(jt.a,{className:"all",span:3,children:n.allStatus.all})]})]})},n.renderFilterSection=function(){return Object(se.jsxs)(ht.b,{className:"filters",children:[Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u540d\u79f0",children:Object(se.jsx)(Ct,{placeholder:"\u641c\u7d22\u6848\u4ef6\u540d\u79f0",allowClear:!0,onChange:n.onSearchIssueName,onSearch:n.onSearchIssueName})}),Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u7c7b\u578b",children:Object(se.jsx)(N.a,{defaultValue:U,onChange:n.onIssueTypeChange,children:le([{name:"\u5211\u4e8b\u6848\u4ef6",value:1},{name:"\u884c\u653f\u6848\u4ef6",value:2}])})}),Object(se.jsx)(ht.b.Item,{label:"\u91c7\u53d6\u63aa\u65bd",children:Object(se.jsx)(N.a,{defaultValue:U,onChange:n.onActionFilterChange,children:le(B)})}),Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u72b6\u6001",children:Object(se.jsx)(N.a,{defaultValue:U,onChange:n.onIssueStatusChange,children:le([_,ee,te,re,ne])})}),Object(se.jsx)(ht.b.Item,{label:"\u8d1f\u8d23\u4eba",children:Object(se.jsx)(N.a,{allowClear:!0,onChange:n.onOwnerChange,children:n.getAllUsersList()})}),Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u5bf9\u8c61",children:Object(se.jsx)(Ct,{placeholder:"\u641c\u7d22\u6848\u4ef6\u5bf9\u8c61",allowClear:!0,onChange:n.onSearchTargetName,onSearch:n.onSearchTargetName})}),Object(se.jsx)(ht.b.Item,{label:"\u767b\u8bb0\u65e5\u671f",children:Object(se.jsx)(Nt,{allowClear:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],onChange:n.onStartTimeFilterChange})}),Object(se.jsx)(ht.b.Item,{label:"\u622a\u6b62\u65e5\u671f",children:Object(se.jsx)(Nt,{allowClear:!0,placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],onChange:n.onEndTimeFilterChange})})]})},n.renderIssueTable=function(){var e=n.state,t=e.currentIssues,r=e.users;return Object(se.jsx)(v.a,{className:"issueList",dataSource:t,columns:Ze(n.getUserNameById,n.handleMarkComplete,n.handleMoveToNextStep,n.handleDeleteIssue,n.currentUserId,je(r,n.currentUserId)),rowClassName:function(e){return"table-row-status"+e.completeStatus},expandable:{expandedRowRender:function(e){return Object(se.jsxs)(ht.b,{title:e.issueName,column:3,children:[Object(se.jsx)(ht.b.Item,{label:"\u8d1f\u8d23\u4eba",children:n.getUserNameById(e.ownerId)}),Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u5bf9\u8c61",children:e.targetName}),Object(se.jsx)(ht.b.Item,{label:"\u6848\u4ef6\u72b6\u6001",children:-1===e.status?"\u5df2\u5b8c\u6210":B[e.action].steps[e.status].name}),Object(se.jsx)(ht.b.Item,{label:"\u91c7\u53d6\u63aa\u65bd",children:B[e.action].name}),Object(se.jsx)(ht.b.Item,{label:"\u767b\u8bb0\u65e5\u671f",children:new Date(e.startTime).toLocaleDateString()}),-1===e.status?Object(se.jsx)(ht.b.Item,{label:"\u5b8c\u6210\u65e5\u671f",children:new Date(e.completeTime).toLocaleDateString()}):Object(se.jsx)(ht.b.Item,{label:"\u622a\u6b62\u65e5\u671f",children:new Date(e.endTime).toLocaleDateString()}),Object(se.jsx)(ht.b.Item,{label:"\u5907\u6ce8",span:3,children:e.details})]})}}})},n.renderIssueModal=function(){var e=n.state,t=e.issueModalVisible,r=e.users,a=be(r,n.currentUserId)||{},s=function(){var e=be(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");return e?B.filter((function(t){return oe(e.privilege,t.type)})):[]}(r,n.currentUserId);return Object(se.jsx)(f.a,{closable:!1,className:"issueModal",title:"\u6dfb\u52a0\u65b0\u6848\u4ef6",visible:t,footer:null,children:Object(se.jsxs)(w.a,{ref:n.issueFormRef,labelCol:{span:5},wrapperCol:{span:15},initialValues:{issueName:"",targetName:"",action:s.length>0&&s[0].value||0,startTime:He()(),details:""},children:[Object(se.jsx)(w.a.Item,{label:"\u6848\u4ef6\u540d\u79f0\uff1a",name:"issueName",rules:[{required:!0,message:Z}],children:Object(se.jsx)(g.a,{})}),Object(se.jsx)(w.a.Item,{label:"\u8d1f\u8d23\u4eba",children:a.name}),Object(se.jsx)(w.a.Item,{label:"\u6848\u4ef6\u5bf9\u8c61",name:"targetName",rules:[{required:!0,message:"\u6848\u4ef6\u5bf9\u8c61\u4e0d\u80fd\u4e3a\u7a7a\uff01"}],children:Object(se.jsx)(g.a,{})}),Object(se.jsx)(w.a.Item,{label:"\u91c7\u53d6\u63aa\u65bd",name:"action",children:Object(se.jsx)(N.a,{children:le(s,!1)})}),Object(se.jsx)(w.a.Item,{label:"\u767b\u8bb0\u65f6\u95f4",name:"startTime",children:Object(se.jsx)(dt.a,{})}),Object(se.jsx)(w.a.Item,{label:"\u5907\u6ce8",name:"details",children:Object(se.jsx)(mt.a,{})}),Object(se.jsxs)(w.a.Item,{className:"buttons",wrapperCol:{offset:5,span:15},children:[Object(se.jsx)(x.a,{type:"primary",htmlType:"submit",onClick:n.handleCreateIssue,children:"\u521b\u5efa"}),Object(se.jsx)(x.a,{htmlType:"button",onClick:n.handleCancelIssue,children:"\u53d6\u6d88"})]})]})})},n.currentUserId=Te().id,n.issueFormRef=a.a.createRef(),n.state={issueModalVisible:!1,showCurtain:!1,users:[],issueList:[],currentIssues:[]},n.filterStatus={issueName:"",issueType:-1,action:-1,completeStatus:-1,ownerId:-1,targetName:"",startTime:null,endTime:null},n.resetCounts(),n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(h.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllIssueList();case 2:return e.next=4,Ae();case 4:t=e.sent,this.setState({users:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentIssues,r=e.showCurtain,n=e.users;return 0===n.length?null:Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(it,{isHome:!0,showUserManagement:!0,currentUserId:this.currentUserId,userList:n}),Object(se.jsxs)("div",{className:"main",children:[this.renderSummary(),Object(se.jsxs)("div",{className:"header",children:[Object(se.jsx)("div",{children:"\u6848\u4ef6\u5217\u8868"}),Object(se.jsxs)("div",{className:"total",children:[Object(se.jsx)("span",{children:"\u5f53\u524d\u663e\u793a".concat(t.length,"\u4e2a\u6848\u4ef6")}),Object(se.jsx)(x.a,{type:"primary",shape:"round",icon:Object(se.jsx)(m.a,{}),onClick:this.openIssueEditor,children:"\u6dfb\u52a0\u65b0\u6848\u4ef6"})]})]}),this.renderFilterSection(),this.renderIssueTable()]}),Object(se.jsx)(et,{visible:r}),this.renderIssueModal()]})}}]),r}(n.PureComponent),Rt=Ut,Pt=(r(416),function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onFinish=function(){var e=Object(h.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(t.username,t.password);case 3:window.location.href="/home",e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),-1===e.t0.code?O.b.error(e.t0.msg):O.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),e.onFinishFailed=function(e){console.log("Failed")},e}return Object(u.a)(r,[{key:"render",value:function(){return Object(se.jsxs)("div",{className:"mainForm",children:[Object(se.jsx)("div",{className:"title",children:"\u91d1\u534e\u6d77\u5173\u6848\u4ef6\u7ba1\u7406\u7cfb\u7edf"}),Object(se.jsxs)(w.a,{name:"loginForm",className:"loginForm",labelCol:{span:5},wrapperCol:{span:15},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,autoComplete:"off",children:[Object(se.jsx)(w.a.Item,{label:"\u7528\u6237\u540d: ",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(se.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),Object(se.jsx)(w.a.Item,{label:"\u5bc6\u7801: ",name:"password",children:Object(se.jsx)(g.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),Object(se.jsx)(w.a.Item,{className:"buttons",wrapperCol:{span:20},children:Object(se.jsx)(x.a,{type:"primary",htmlType:"submit",children:"\u767b\u5f55"})})]})]})}}]),r}(n.PureComponent)),Ft=Pt,Dt=(r(417),function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(se.jsxs)(p.d,{children:[Object(se.jsx)(p.b,{path:"/home",element:Object(se.jsx)(Rt,{})}),Object(se.jsx)(p.b,{path:"/login",element:Object(se.jsx)(Ft,{})}),Object(se.jsx)(p.b,{path:"/admin",element:Object(se.jsx)(ot,{})}),Object(se.jsx)(p.b,{path:"*",element:Object(se.jsx)(p.a,{replace:!0,to:"/home"})})]})}}]),r}(n.PureComponent)),Mt=Dt;c.a.createRoot(document.getElementById("root")).render(Object(se.jsx)(i.a,{children:Object(se.jsx)(Mt,{})}))}},[[418,1,2]]]);
//# sourceMappingURL=main.de8d1208.chunk.js.map